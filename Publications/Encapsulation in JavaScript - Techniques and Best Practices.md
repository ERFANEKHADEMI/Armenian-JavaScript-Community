# Ի՞նչ է ինկապսուլյացիան։ Մասնավոր (private) հատկություններն ու մեթոդները JavaScript ծրագրավորման լեզվում։

Ինկապսուլյացիա (_անգլ․ encapsulation բառից_) եզրը կարելի է հասկանալ որպես ինչ֊որ բանի մեկուսացում, դրա վրա դրսից արտաքին միջամտությունները բացառելու կամ հնարավորինս փոքրացնելու համար։ Այն կարելի է ընկալել նաև որպես մեխանիզմ, որը մեզ հնարավորություն է տալիս տեսնել գլխավորն ու կարևորը՝ երկրորդական կամ խանգարող բաները ինչ֊որ պայմանական կապսուլի մեջ սահմանափակելով։

Ինկապսուլյացիայի օրինակները մեր շուրջը բազմաթիվ են։ Դիտարկենք հեռուստացույցի օրինակը։ Հեռակառավարման վահանակի օգնությամբ կարելի է փոխել հեռուստաալիքները, բարձրացնել կամ ցածրացնել հեռուստացույցի ձայնը, փոխել էկրանի պայծառության չափը և այլն։

Այդ առաջին հայացքից պարզ թվացող գործողությունները կատարելու ժամանակ հեռուստացույցի ներսում կարող են մի շարք փոխազդեցություններ տեղի ունենալ տարբեր բլոկների, դետալների միջև, սակայն այդ ամենը մեզանից խնամքով թաքցված է։ Այսինքն գոյություն ունի հեռուստացույցի արտաքին և ներքին ինտերֆեյս։

Ներքին ինտերֆեյսն օգտագործվում է օբյեկտի աշխատանքի ընթացքում։ Օբյեկտի դետալները փոխազդեցության մեջ են իրար հետ։ Բայց արտաքինից այդ ամենը խնամքով թաքցրած է հեռուստացույցի պատյանի տակ, և դետալները տեսանելի չեն։ Մենք նրանց կարող ենք օգտագործել միայն արտաքին ինտերֆեյսի օգնությամբ։

Ինֆորմատիկայում ինկապսուլյացիան կատարում է նույն դերը՝ այն փաստացի ծրագրավորման մեխանիզմ է, որը թույլ է տալիս սահմանափակել դասերի հատկություններին և մեթոդներին դրսից հասանելիությունը՝ վերահսկելի դարձնելով նրանց հետ կատարվող գործողությունները։

Թեև ծրագրավորման մեջ ինկապսուլյացիան շատ հաճախ դիտարկվում է որպես բացառապես Օբյեկտ Կողմնորոշված Ծրագրավորման հետ սերտորեն կապված մեխանիզմ, իրականում այն ավելի ընդգրկուն է։

Օրինակ մի շարք ֆունկցիոնալ լեզուներում տարածված է ինկապսուլյացիայի մեխանիզմի իրագործումը հատուկ տեսակի ֆունկցիաների օգնությամբ։ Նրանք հայտարարվում են այլ ֆունկցիաների մեջ, և հասանելիություն են ունենում արտաքին ֆունկցիայի լոկալ փոփոխականներին։ **JavaScript**-ը, որպես բազմահարացուցային լեզու, հիմնականում տիպիկ ֆունկցիոնալ լեզուներին բնորոշ այդ մեխանիզմը նույնպես օգտագործում է, ընդ որում շատ հաճախակի (_closure֊ները_):

Այժմ վերացական տեսական դատողություններից անցնենք կոնկրետ օրինակների քննարկմանը։ **JavaScript**-ում օբյեկտների հատկություններն ու մեթոդները կարող են լինել հասանելի և մասնավոր (_private_): Մի շարք տարածված ծրագրավորման լեզուներում (_օրինակ C++, C#, Java_) ծրագրի մեջ բոլոր տեղերից հասանելի դաշտերի ստեղծման համար օգտագործվում է _public_, իսկ մասնավոր, միայն դասի մեջ տեսանելի դաշտերի համար՝ _private_ բանալի բառը։

**JavaScript**-ում որոշել են այլ կերպ իրականացնել դա, ծրագրի շրջանակում բոլոր տեղերից հասանելի հատկությունների և մեթոդների համար ոչ մի լրացուցիչ բանալի բառ չի օգտագործվում, իսկ եթե հատկությունը կամ մեթոդը պետք է ստեղծել «փակ», տեսանելի միայն դասի ներսում, ապա դրանցից առաջ դրվում է **#** նշանը։

Պետք է նշել, որ վերոհիշյալ ծրագրավորման լեզուներում (_C++, C#, Java և այլն_) կա նաև հնարավորություն ստեղծել այպես կոչված «պաշտպանված» դաշտեր և մեթոդներ, որոնք հասանելի են միայն տվյալ դասի և նրա ժառանգների համար (_Օգտագործվում է protected բանալի բառը_)։ **JavaScript**-ում դա նախատեսված չէ, սակայն որոշակի պայմանավորվածություններով հնարավոր է էմուլացնել։

Այժմ ստեղծենք _Person_ դասը, որի հատկությունները սկզբում կլինեն հասանելի, իսկ հետո կսարքենք փակ, մասնավոր (_private_): Եվ կտեսնենք, թե ինչ առավելություններ ունի երկրորդ տարբերակը՝ համեմատած առաջինի։

```
class Person {
  name;
  age;
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
  greeting() {
    console.log(`hello ${this.name}`);
  }
}
```

Դասն ունի երկու դաշտ՝ _name_ և _age_, և մեկ սովորական մեթոդ, որի կանչի ժամանակ ուղղակի կոնսոլում տպվում է ողջույնի խոսք։ Երբ մենք այս դասի հիման վրա ստեղծում ենք օբյեկտներ, ապա նրանց դաշտերին կոնստրուկտորի օգնությամբ վերագրվում են համապատասխան արժեքները։ Փորձենք ստեղծել օբյեկտ, և տեսնել թե ինչ կարող ենք անել նրա դաշտերի հետ։

```
const person = new Person("Joe", 25);
person.greeting(); // hello Joe
person.age = 150;
console.log(person); // { name: 'Joe', age: 150 }
```

Օբյեկտի ստեղծման ժամանակ մենք կոնստրուկտորի օգնությամբ նրան տվեցինք անուն և տարիք։ Սակայն քանի֊որ օբյեկտի հատկությունները հասանելի են դրսից, շատ հնարավոր է անկառավարելի, անգամ անհեթեթ արժեքներ վերագրվեն տվյալ հատկություններին, կամ այդ վերագրումներն արվեն ոչ այն ժամանակ, երբ պետք է։

Իհարկե նման փոքրիկ օրինակի վրա հնարավոր չէ պատկերացնել թե դա ինչպես կարող է տեղի ունենալ, սակայն պատկերացրեք չափազանց մեծ նախագիծ, բաղկացած հազարավոր կամ տասնյակ հազարավոր տողերից, որի վրա աշխատում է մեծ թիմ։

Այդպիսի դեպքերում չի կարելի բացառել, որ սխալմամբ կամ անուշադրության արդյունքում մեծ քանակությամբ սխալ վերագրումներ լինեն՝ դրանից բխող հետևանքներով։ Ճիշտ իրականացված ինկապսուլյացիան օգնում է խուսափել մեծ քանակությամբ խնդիրներից։ Օրինակ մեր պարագայում կարող ենք դաշտերին հասանելիություն տալ միայն դասի շրջանակներում՝ այդպիսով ապահովագրելով մեզ օբյեկտների հատկությունների սխալ վերագրումներից։

```
class Person {
  #name;
  #age;

  constructor(name, age) {
    this.#name = name;
    this.#age = age;
  }

  greeting() {
    console.log(`hello ${this.#name}`);
  }
}

const person = new Person("Joe", 25);
person.greeting(); // hello Joe
console.log(person.age); // undefined
console.log(person.name); // undefined
```
